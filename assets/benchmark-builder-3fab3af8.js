import{d as C,o as v,e as h,f,a3 as D,l as A,bk as E,aJ as O,F as U,g as N,i as e,h as n,bl as P,w as d,j as x,aU as F,a4 as z,m as R,aK as I,B as T,b as W,s as q,x as H,y as J,E as G,c as Q,H as X,v as Y}from"./index-d4d1dfb2.js";import{_ as Z}from"./InputNumber-0805157e.js";import{_ as ee}from"./Scrollbar-8fa0a765.js";import{_ as te}from"./Divider-39be8c8b.js";import{_ as ne}from"./FormItem-cc07462d.js";import"./use-locale-bb735d99.js";import"./use-form-item-d41cebbd.js";import"./Button-510b489f.js";import"./Remove-e53214a0.js";const oe={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},ae=f("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[f("path",{d:"M12 5v14"}),f("path",{d:"M5 12h14"})],-1),se=[ae],K=C({name:"Plus",render:function(s,l){return v(),h("svg",oe,se)}}),le={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},re=D('<g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 7h16"></path><path d="M10 11v6"></path><path d="M14 11v6"></path><path d="M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-12"></path><path d="M9 7V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3"></path></g>',1),ie=[re],L=C({name:"Trash",render:function(s,l){return v(),h("svg",le,ie)}});function V({data:o}){return o.length===0?0:A.sum(o)/o.length}function ue({data:o}){const s=V({data:o}),l=o.map(r=>(r-s)**2);return V({data:l})}function ce({data:o,headerMap:s={}}){if(!Array.isArray(o)||o.length===0)return"";const l=Object.keys(o[0]),r=o.map(u=>Object.values(u)),i=`| ${l.map(u=>s[u]??u).join(" | ")} |`,w=`| ${l.map(()=>"---").join(" | ")} |`,$=r.map(u=>`| ${u.join(" | ")} |`).join(`
`);return`${i}
${w}
${$}`}const pe=C({__name:"dynamic-values",props:{values:{}},emits:["update:values"],setup(o,{emit:s}){const l=o,r=E(),i=O(l,"values",s);async function w(){i.value.push(null),await F(),r.value.at(-1)?.focus()}function $(u){if(u===i.value.length-1){w();return}r.value.at(u+1)?.focus()}return(u,B)=>{const a=z,t=R,c=I;return v(),h("div",null,[(v(!0),h(U,null,N(n(i),(k,p)=>(v(),h("div",{key:p,"mb-2":"",flex:"","flex-nowrap":"","gap-2":""},[e(n(Z),{ref_for:!0,ref:n(r).set,value:n(i)[p],"onUpdate:value":g=>n(i)[p]=g,"show-button":!1,placeholder:"Set your measure...",autofocus:"",onKeydown:P(g=>$(p),["enter"])},null,8,["value","onUpdate:value","onKeydown"]),e(c,{tooltip:"Delete this value"},{default:d(()=>[e(t,{circle:"",variant:"text",onClick:g=>n(i).splice(p,1)},{default:d(()=>[e(a,{component:n(L),depth:"3",size:"18"},null,8,["component"])]),_:2},1032,["onClick"])]),_:2},1024)]))),128)),e(t,{onClick:w},{default:d(()=>[e(a,{component:n(K),depth:"3","mr-2":"",size:"18"},null,8,["component"]),x(" Add a measure ")]),_:1})])}}}),_e={"mb-5":"",flex:"","flex-1":"","flex-nowrap":"","justify-center":"","gap-12px":""},de={flex:"","justify-center":""},me={style:{flex:"0 0 100%"}},fe={style:{"max-width":"600px",margin:"0 auto"}},ve={"mx-auto":"","max-w-sm":"",flex:"","justify-center":"","gap-3":""},he={"mt-5":"",flex:"","justify-center":"","gap-3":""},je=C({__name:"benchmark-builder",setup(o){const s=T("benchmark-builder:suites",[{title:"Suite 1",data:[5,10]},{title:"Suite 2",data:[8,12]}]),l=T("benchmark-builder:unit",""),r=a=>Math.round(a*1e3)/1e3,i=W(()=>s.value.map(({data:a,title:t})=>{const c=a.filter(A.isNumber);return{title:t,size:c.length,mean:V({data:c}),variance:ue({data:c})}}).sort((a,t)=>a.mean-t.mean).map(({mean:a,variance:t,size:c,title:k},p,g)=>{const b=l.value.trim(),m=g[0].mean,M=a-m,j=m===0?"∞":r(a/m),_=p!==0&&m!==a?` (+${r(M)}${b} ; x${j})`:"";return{position:p+1,title:k,mean:`${r(a)}${b}${_}`,variance:`${r(t)}${b}${b?"²":""}`,size:c}})),{copy:w}=q({createToast:!1}),$={position:"Position",title:"Suite",size:"Samples",mean:"Mean",variance:"Variance"};function u(){w(ce({data:i.value,headerMap:$}))}function B(){const a=i.value.flatMap(({title:t,...c})=>[` - ${t}`,...Object.entries(c).map(([k,p])=>`    - ${$[k]??k}: ${p}`)]).join(`
`);w(a)}return(a,t)=>{const c=J,k=te,p=ne,g=Y,b=z,m=R,M=ee,j=G;return v(),h(U,null,[e(M,{style:{flex:"1"},"x-scrollable":""},{default:d(()=>[f("div",_e,[(v(!0),h(U,null,N(n(s),(_,S)=>(v(),h("div",{key:S},[e(g,{style:{width:"294px"}},{default:d(()=>[e(c,{value:_.title,"onUpdate:value":y=>_.title=y,"label-position":"left",label:"Suite name",placeholder:"Suite name...",clearable:""},null,8,["value","onUpdate:value"]),e(k),e(p,{label:"Suite values","show-feedback":!1},{default:d(()=>[e(pe,{values:_.data,"onUpdate:values":y=>_.data=y},null,8,["values","onUpdate:values"])]),_:2},1024)]),_:2},1024),f("div",de,[n(s).length>1?(v(),Q(m,{key:0,variant:"text",onClick:y=>n(s).splice(S,1)},{default:d(()=>[e(b,{component:n(L),depth:"3","mr-2":"",size:"18"},null,8,["component"]),x(" Delete suite ")]),_:2},1032,["onClick"])):X("",!0),e(m,{variant:"text",onClick:y=>n(s).splice(S+1,0,{data:[0],title:`Suite ${n(s).length+1}`})},{default:d(()=>[e(b,{component:n(K),depth:"3","mr-2":"",size:"18"},null,8,["component"]),x(" Add suite ")]),_:2},1032,["onClick"])])]))),128))])]),_:1}),f("div",me,[f("div",fe,[f("div",ve,[e(c,{value:n(l),"onUpdate:value":t[0]||(t[0]=_=>H(l)?l.value=_:null),placeholder:"Unit (eg: ms)",label:"Unit","label-position":"left","mb-4":""},null,8,["value"]),e(m,{onClick:t[1]||(t[1]=_=>s.value=[{title:"Suite 1",data:[]},{title:"Suite 2",data:[]}])},{default:d(()=>[x(" Reset suites ")]),_:1})]),e(j,{data:n(i),headers:$},null,8,["data"]),f("div",he,[e(m,{onClick:t[2]||(t[2]=_=>u())},{default:d(()=>[x(" Copy as markdown table ")]),_:1}),e(m,{onClick:t[3]||(t[3]=_=>B())},{default:d(()=>[x(" Copy as bullet list ")]),_:1})])])])],64)}}});export{je as default};
