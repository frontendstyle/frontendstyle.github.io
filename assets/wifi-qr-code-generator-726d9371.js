import{n as c,P as F,x as d,L as u,d as H,c as W,w as A,v as N,o as g,f as w,i as p,h as o,j as S,H as E,e as U,a0 as B,y as q,m as L}from"./index-d4d1dfb2.js";import{b as K}from"./browser-e933942f.js";import{u as V}from"./downloadBase64-f79bbe12.js";import{_ as z}from"./Checkbox-86b1399e.js";import{_ as O}from"./ColorPicker-e824e0dc.js";import{_ as R}from"./FormItem-cc07462d.js";import{_ as Y}from"./Form-4537d7f7.js";import"./index-ec5889d2.js";import"./___vite-browser-external_commonjs-proxy-e35a6e85.js";import"./use-form-item-d41cebbd.js";import"./Button-510b489f.js";import"./use-locale-bb735d99.js";import"./InputGroup-1e45da37.js";const Q=["MD5","POTP","GTC","TLS","IKEv2","SIM","AKA","AKA'","TTLS","PWD","LEAP","PSK","FAST","TEAP","EKE","NOOB","PEAP"],j=["None","MSCHAPV2"];function h(b){return b.replace(/([\\;,:"])/g,"\\$1")}function G(b){const{ssid:n,password:t,encryption:a,eapMethod:s,isHiddenSSID:m,eapAnonymous:_,eapIdentity:f,eapPhase2Method:i}=b;if(!n)return null;if(a==="nopass")return`WIFI:S:${h(n)};;`;if(a!=="WPA2-EAP"&&t)return`WIFI:S:${h(n)};T:${a};P:${h(t)};${m?"H:true":""};`;if(a==="WPA2-EAP"&&t&&s){if(!f&&!_||s==="PEAP"&&!i)return null;const v=_?"A:anon":`I:${h(f)}`,P=i!=="None"?`PH2:${i};`:"";return`WIFI:S:${h(n)};T:WPA2-EAP;P:${h(t)};E:${s};${P}${v};${m?"H:true":""};`}return null}function J({ssid:b,password:n,eapMethod:t,isHiddenSSID:a,eapAnonymous:s,eapIdentity:m,eapPhase2Method:_,color:{background:f,foreground:i},options:v}){const P=c(""),r=c("WPA");return F([b,n,r,t,a,s,m,_,f,i].filter(d),async()=>{const x=G({ssid:u(b),password:u(n),encryption:u(r),eapMethod:u(t),isHiddenSSID:u(a),eapAnonymous:u(s),eapIdentity:u(m),eapPhase2Method:u(_)});x&&(P.value=await K.toDataURL(u(x).trim(),{color:{dark:u(i),light:u(f),...v?.color},errorCorrectionLevel:"M",...v}))},{immediate:!0}),{qrcode:P,encryption:r}}const X={grid:"","grid-cols-1":"","gap-12":""},Z={class:"mb-6 flex flex-row items-center gap-2"},ee={key:2,class:"mb-6 flex flex-row items-center gap-2"},le={key:0},oe={flex:"","flex-col":"","items-center":"","gap-3":""},ne=["src"],be=H({__name:"wifi-qr-code-generator",setup(b){const n=c("#000000ff"),t=c("#ffffffff"),a=c(),s=c(),m=c(),_=c(!1),f=c(!1),i=c(),v=c(),{qrcode:P,encryption:r}=J({ssid:a,password:s,eapMethod:m,isHiddenSSID:_,eapAnonymous:f,eapIdentity:i,eapPhase2Method:v,color:{background:t,foreground:n},options:{width:1024}}),{download:x}=V({source:P,filename:"qr-code.png"});return(te,l)=>{const y=B,k=q,$=z,I=O,T=R,C=Y,D=L,M=N;return g(),W(M,null,{default:A(()=>[w("div",X,[w("div",null,[p(y,{value:o(r),"onUpdate:value":l[0]||(l[0]=e=>d(r)?r.value=e:null),"mb-4":"",label:"Encryption method","default-value":"WPA","label-position":"left","label-width":"130px","label-align":"right",options:[{label:"No password",value:"nopass"},{label:"WPA/WPA2",value:"WPA"},{label:"WEP",value:"WEP"},{label:"WPA2-EAP",value:"WPA2-EAP"}]},null,8,["value"]),w("div",Z,[p(k,{value:o(a),"onUpdate:value":l[1]||(l[1]=e=>d(a)?a.value=e:null),"label-position":"left","label-width":"130px","label-align":"right",label:"SSID:",rows:"1",autosize:"",placeholder:"Your WiFi SSID...","mb-6":""},null,8,["value"]),p($,{checked:o(_),"onUpdate:checked":l[2]||(l[2]=e=>d(_)?_.value=e:null)},{default:A(()=>[S(" Hidden SSID ")]),_:1},8,["checked"])]),o(r)!=="nopass"?(g(),W(k,{key:0,value:o(s),"onUpdate:value":l[3]||(l[3]=e=>d(s)?s.value=e:null),"label-position":"left","label-width":"130px","label-align":"right",label:"Password:",rows:"1",autosize:"",type:"password",placeholder:"Your WiFi Password...","mb-6":""},null,8,["value"])):E("",!0),o(r)==="WPA2-EAP"?(g(),W(y,{key:1,value:o(m),"onUpdate:value":l[4]||(l[4]=e=>d(m)?m.value=e:null),label:"EAP method","label-position":"left","label-width":"130px","label-align":"right",options:o(Q).map(e=>({label:e,value:e})),searchable:"","mb-4":""},null,8,["value","options"])):E("",!0),o(r)==="WPA2-EAP"?(g(),U("div",ee,[p(k,{value:o(i),"onUpdate:value":l[5]||(l[5]=e=>d(i)?i.value=e:null),"label-position":"left","label-width":"130px","label-align":"right",label:"Identity:",rows:"1",autosize:"",placeholder:"Your EAP Identity...","mb-6":""},null,8,["value"]),p($,{checked:o(f),"onUpdate:checked":l[6]||(l[6]=e=>d(f)?f.value=e:null)},{default:A(()=>[S(" Anonymous? ")]),_:1},8,["checked"])])):E("",!0),o(r)==="WPA2-EAP"?(g(),W(y,{key:3,value:o(v),"onUpdate:value":l[7]||(l[7]=e=>d(v)?v.value=e:null),label:"EAP Phase 2 method","label-position":"left","label-width":"130px","label-align":"right",options:o(j).map(e=>({label:e,value:e})),searchable:"","mb-4":""},null,8,["value","options"])):E("",!0),p(C,{"label-width":"130","label-placement":"left"},{default:A(()=>[p(T,{label:"Foreground color:"},{default:A(()=>[p(I,{value:o(n),"onUpdate:value":l[8]||(l[8]=e=>d(n)?n.value=e:null),modes:["hex"]},null,8,["value"])]),_:1}),p(T,{label:"Background color:"},{default:A(()=>[p(I,{value:o(t),"onUpdate:value":l[9]||(l[9]=e=>d(t)?t.value=e:null),modes:["hex"]},null,8,["value"])]),_:1})]),_:1})]),o(P)?(g(),U("div",le,[w("div",oe,[w("img",{alt:"wifi-qrcode",src:o(P),width:"200"},null,8,ne),p(D,{onClick:o(x)},{default:A(()=>[S(" Download qr-code ")]),_:1},8,["onClick"])])])):E("",!0)])]),_:1})}}});export{be as default};
